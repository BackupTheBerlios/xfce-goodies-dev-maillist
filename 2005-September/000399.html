<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> 'hacking' some of XFCE goodies
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/xfce-goodies-dev/2005-September/index.html" >
   <LINK REL="made" HREF="mailto:xfce-goodies-dev%40lists.berlios.de?Subject=Re%3A%20%27hacking%27%20some%20of%20XFCE%20goodies&In-Reply-To=%3C4325CDC0.3060208%40szift.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000415.html">
   <LINK REL="Next"  HREF="000400.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>'hacking' some of XFCE goodies</H1>
    <B>&#321;ukasz Hejnak</B> 
    <A HREF="mailto:xfce-goodies-dev%40lists.berlios.de?Subject=Re%3A%20%27hacking%27%20some%20of%20XFCE%20goodies&In-Reply-To=%3C4325CDC0.3060208%40szift.org%3E"
       TITLE="'hacking' some of XFCE goodies">szift at szift.org
       </A><BR>
    <I>Mon Sep 12 20:49:36 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000415.html">Screenshot plugin
</A></li>
        <LI>Next message: <A HREF="000400.html">'hacking' some of XFCE goodies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#399">[ date ]</a>
              <a href="thread.html#399">[ thread ]</a>
              <a href="subject.html#399">[ subject ]</a>
              <a href="author.html#399">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
I wanted to show You some of the xfce goodies I managed to tweak a 
little lately.
Thought it may be usefull for someone else, though it isn't probably the 
best way to achieve my demands, as I'm not much of a C coder ;]
Anyway here's what i've done..

xfce4-cpugraph-plugin: 
<A HREF="http://szift.org/xfce/xfce4-cpugraph-plugin-szifted.tar.bz2">http://szift.org/xfce/xfce4-cpugraph-plugin-szifted.tar.bz2</A>
The graph window is ok, but except knowing what's the current cpu usage,
I wanted to have a little 'top' over there too, so I added it to the 
tooltip info. Now when You go over the plugin window, You can see the 
usage % and the names of 3 most active processes at the moment.
This one isn't too clean though. I didn't know how to easily gather the 
data, that top usually displays, so I used top to do it.
There's a call like this (in the UpdateTooltip())
exec_cmd (cmd-&gt;str, FALSE, FALSE);
where cmd-&gt;str is &quot;/usr/local/bin/top_go&quot;
and where top_go is as simple as

cat &gt; /usr/local/bin/top_go &lt;&lt; &quot;EOF&quot;
top -b -n 1 &gt;&amp; /tmp/top.lista
EOF
chmod +x /usr/local/bin/top_go

This creates the file /tmp/top.lista which I then parse to get the data 
I'm interested in.


xfce4-fsguard-plugin: 
<A HREF="http://szift.org/xfce/xfce4-fsguard-plugin-szifted.tar.bz2">http://szift.org/xfce/xfce4-fsguard-plugin-szifted.tar.bz2</A>
The changes made here, are making it not only display one filesystem, 
but cycle trough a (hardcoded for now) list of filesystems.
The count is in #define ITERMAX and the list is easy to find
in the plugin_check_fs()  (if (plugin-&gt;iter==0) and so on).
It would be nice to make the list available to be modified trought the 
options window, and to make the icon bring more info, some text floating 
over like hda1, hdb5 etc.


Other changes I made, but are still causing me errors and not working 
like they should.
I modified the xfce4-systemload-plugin and xfce4-netload-plugin to read 
info from local files, in the /tmp dir. The files are updated by another 
app, a server-client team, that transmits the required data from my 
server to my workstation. This way I can see the cpu/mem/swap usage and 
net traffic of my server on my desktop.
The error here, is the server-client team. I get some errors in that 
code and can't seem to find the fix lately, even though it worked fine 
before ;]

And finally another change to the xfce4-systemload-plugin to instead of 
displaying the local swap, display the seti client progress.
So I got the bar for 0%-&gt;100%, and in the tooltip I get info on 
progress, current WU count and time used so far to do the computing in 
hours, minutes and seconds, as displayed by the client after sending a 
result header.

If anyone would like me to do so, I will make those last three available 
also, but I'm warning that those tend to crash my panel once a while..

--
With regards
&#321;ukasz Hejnak

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000415.html">Screenshot plugin
</A></li>
	<LI>Next message: <A HREF="000400.html">'hacking' some of XFCE goodies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#399">[ date ]</a>
              <a href="thread.html#399">[ thread ]</a>
              <a href="subject.html#399">[ subject ]</a>
              <a href="author.html#399">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/xfce-goodies-dev">More information about the xfce-goodies-dev
mailing list</a><br>
</body></html>
