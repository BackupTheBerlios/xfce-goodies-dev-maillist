<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> 'hacking' some of XFCE goodies
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/xfce-goodies-dev/2005-September/index.html" >
   <LINK REL="made" HREF="mailto:xfce-goodies-dev%40lists.berlios.de?Subject=Re%3A%20%27hacking%27%20some%20of%20XFCE%20goodies&In-Reply-To=%3C20050917121632.00001c85%40ACER_ONDRA%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000401.html">
   <LINK REL="Next"  HREF="000402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>'hacking' some of XFCE goodies</H1>
    <B>Ondrej Mih&#225;lyi</B> 
    <A HREF="mailto:xfce-goodies-dev%40lists.berlios.de?Subject=Re%3A%20%27hacking%27%20some%20of%20XFCE%20goodies&In-Reply-To=%3C20050917121632.00001c85%40ACER_ONDRA%3E"
       TITLE="'hacking' some of XFCE goodies">mihalyi at matfyz.cz
       </A><BR>
    <I>Sat Sep 17 12:16:32 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000401.html">'hacking' some of XFCE goodies
</A></li>
        <LI>Next message: <A HREF="000402.html">'hacking' some of XFCE goodies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#413">[ date ]</a>
              <a href="thread.html#413">[ thread ]</a>
              <a href="subject.html#413">[ subject ]</a>
              <a href="author.html#413">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Didn't try your app, but I think that it would help, if instead of system() you would use combination of fork(), exec() and waitpid().  Idea is to use fork and exec to spawn the 'top' process and then periodically use non-blocking version of waitpid (there are some flags to make it non-blocking) to check whether the 'top' process finished.

I know that you may well not be familiar with those functions, but if you want to succeed in making your app better, I believe that this is kind of easy way how to do it.

Cheers, 

Ondrej

On Fri, 16 Sep 2005 12:08:41 +0200
_ukasz Hejnak &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/xfce-goodies-dev">szift at szift.org</A>&gt; wrote:

&gt;<i> Hi again :]
</I>&gt;<i> Ok, just to finish the cpugraph-szifted panel-crashing issue
</I>&gt;<i> As I saw 'some' interest in my modification of cpugraph,
</I>&gt;<i> I decided to finally learn some more on C and finish the crashing
</I>&gt;<i> As reading trough I found out about the system() function ;]
</I>&gt;<i> So now I use that instead of the funny 'script' system
</I>&gt;<i> And as system() waits for the runned process to finish up, it won't give 
</I>&gt;<i> the cpugraph any more reasons to crash also..
</I>&gt;<i> 
</I>&gt;<i> The only issue now, is that as it waits for the system() to finish up, 
</I>&gt;<i> the whole panel freezes for a nano-second (when top works)..
</I>&gt;<i> I think only a alternate system of getting the data would solve this one
</I>&gt;<i> but I don't have time to go into this right now, maybe in the future.
</I>&gt;<i> 
</I>&gt;<i> So all it depends on now is a /tmp dir writable to the user, and the 
</I>&gt;<i> /usr/bin/top program installed.
</I>&gt;<i> The updated version is already available at the standard location:
</I>&gt;<i> <A HREF="http://szift.org/xfce/xfce4-cpugraph-plugin-szifted.tar.bz2">http://szift.org/xfce/xfce4-cpugraph-plugin-szifted.tar.bz2</A>
</I>&gt;<i> 
</I>&gt;<i> Have fun :]
</I>&gt;<i> Should there anything other wrong happen, please let me know.
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Best wishes
</I>&gt;<i> _ukasz Hejnak
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> xfce-goodies-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/xfce-goodies-dev">xfce-goodies-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="http://lists.berlios.de/mailman/listinfo/xfce-goodies-dev">http://lists.berlios.de/mailman/listinfo/xfce-goodies-dev</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000401.html">'hacking' some of XFCE goodies
</A></li>
	<LI>Next message: <A HREF="000402.html">'hacking' some of XFCE goodies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#413">[ date ]</a>
              <a href="thread.html#413">[ thread ]</a>
              <a href="subject.html#413">[ subject ]</a>
              <a href="author.html#413">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/xfce-goodies-dev">More information about the xfce-goodies-dev
mailing list</a><br>
</body></html>
