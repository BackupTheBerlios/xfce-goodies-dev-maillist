<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Bug in the battery plugin
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/xfce-goodies-dev/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:xfce-goodies-dev%40lists.berlios.de?Subject=Re%3A%20Bug%20in%20the%20battery%20plugin&In-Reply-To=%3C43799DA8.2090108%40static-void-main.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000506.html">
   <LINK REL="Next"  HREF="000507.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Bug in the battery plugin</H1>
    <B>Matthias Eller</B> 
    <A HREF="mailto:xfce-goodies-dev%40lists.berlios.de?Subject=Re%3A%20Bug%20in%20the%20battery%20plugin&In-Reply-To=%3C43799DA8.2090108%40static-void-main.de%3E"
       TITLE="Bug in the battery plugin">matthias.eller at static-void-main.de
       </A><BR>
    <I>Tue Nov 15 09:34:48 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000506.html">plugins for new panel
</A></li>
        <LI>Next message: <A HREF="000507.html">xfce4-i8k-plugin-0.0.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#515">[ date ]</a>
              <a href="thread.html#515">[ thread ]</a>
              <a href="subject.html#515">[ subject ]</a>
              <a href="author.html#515">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,

if you start the plugin with no battery attached the percentage of
remaining battery capacity is not shown if you later plug in the battery.
This is because the plug in could not load the last full capacity
(because no battery was present).

A possible solution is to add

stat = *(ptr + 25);
if (stat == 'y')
{
+ if (acpiinfo-&gt;present == 0)
+ {
+	read_acpi_info(battery);
+ }
if ((ptr = strstr (buf, &quot;charging state:&quot;)) || (ptr = strstr (buf,
&quot;State:&quot;)))
{

to line 529 to get the necessary data.

greetings
Matthias Eller

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000506.html">plugins for new panel
</A></li>
	<LI>Next message: <A HREF="000507.html">xfce4-i8k-plugin-0.0.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#515">[ date ]</a>
              <a href="thread.html#515">[ thread ]</a>
              <a href="subject.html#515">[ subject ]</a>
              <a href="author.html#515">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/xfce-goodies-dev">More information about the xfce-goodies-dev
mailing list</a><br>
</body></html>
